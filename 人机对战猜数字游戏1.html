<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººæœºå¯¹æˆ˜çŒœæ•°å­—æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #4fc3f7, #ff6b6b, #9d4edd);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #e0e0e0;
            margin-bottom: 5px;
        }
        
        .game-info {
            font-size: 1.1rem;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            max-width: 800px;
            margin: 0 auto 20px;
            line-height: 1.6;
            text-align: center;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .player-panel {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ai-panel {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .player-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .player-name {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .player-1 .player-name {
            color: #4fc3f7;
        }
        
        .player-2 .player-name {
            color: #ff6b6b;
        }
        
        .player-turn {
            background: #ffd700;
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: none;
        }
        
        .player-turn.active {
            display: block;
        }
        
        .secret-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #b3e5fc;
        }
        
        .secret-display {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .secret-digit {
            width: 60px;
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .secret-digit.revealed {
            background: linear-gradient(to bottom, #4fc3f7, #0277bd);
            border-color: #4fc3f7;
        }
        
        .secret-digit.unknown {
            background: rgba(0, 0, 0, 0.5);
            color: transparent;
            position: relative;
        }
        
        .secret-digit.unknown::after {
            content: "?";
            position: absolute;
            color: rgba(255, 255, 255, 0.3);
            font-size: 2rem;
        }
        
        .ai-digit {
            width: 60px;
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .ai-digit.revealed {
            background: linear-gradient(to bottom, #ff6b6b, #c2185b);
            border-color: #ff6b6b;
        }
        
        .ai-digit.unknown {
            background: rgba(0, 0, 0, 0.5);
            color: transparent;
            position: relative;
        }
        
        .ai-digit.unknown::after {
            content: "?";
            position: absolute;
            color: rgba(255, 255, 255, 0.3);
            font-size: 2rem;
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .input-grid {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .number-input {
            width: 60px;
            height: 70px;
            font-size: 2.2rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            outline: none;
        }
        
        .number-input:focus {
            border-color: #4fc3f7;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #4fc3f7, #0277bd);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #ff6b6b, #c2185b);
            color: white;
        }
        
        .btn-secondary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(to right, #4caf50, #2e7d32);
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(to right, #f44336, #d32f2f);
            color: white;
        }
        
        .btn-danger:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .guesses-history {
            margin-top: 25px;
        }
        
        .history-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history-list {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
        }
        
        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid #4fc3f7;
        }
        
        .ai-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid #ff6b6b;
        }
        
        .guess-numbers {
            display: flex;
            gap: 8px;
        }
        
        .guess-digit {
            width: 40px;
            height: 50px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .guess-result {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-indicator {
            display: flex;
            gap: 5px;
        }
        
        .result-a, .result-b {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .result-a {
            background: #4caf50;
        }
        
        .result-b {
            background: #ff9800;
        }
        
        .result-count {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .control-center {
            text-align: center;
            margin: 20px 0;
        }
        
        .current-turn {
            font-size: 1.5rem;
            background: linear-gradient(to right, #4fc3f7, #ff6b6b);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .ai-thinking {
            font-size: 1.1rem;
            color: #ff6b6b;
            font-style: italic;
            text-align: center;
            margin: 10px 0;
            min-height: 30px;
        }
        
        .ai-difficulty {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .difficulty-badge {
            background: #ff6b6b;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .stats-panel {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stats-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(76, 201, 240, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(76, 201, 240, 0.2);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #4fc3f7;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #a8dadc;
        }
        
        .winner-announcement {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .winner-content {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .winner-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #ffd700;
        }
        
        .winner-message {
            font-size: 1.3rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .winner-number {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
        }
        
        .winner-digit {
            width: 70px;
            height: 90px;
            background: linear-gradient(to bottom, #4fc3f7, #0277bd);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .winner-player-2 .winner-digit {
            background: linear-gradient(to bottom, #ff6b6b, #c2185b);
        }
        
        .rules-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .rules-content {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            padding: 40px;
            border-radius: 20px;
            text-align: left;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .rules-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #4fc3f7;
            text-align: center;
        }
        
        .rules-list {
            margin-bottom: 30px;
        }
        
        .rule-item {
            margin-bottom: 15px;
            line-height: 1.6;
            display: flex;
            align-items: flex-start;
        }
        
        .rule-number {
            background: #4fc3f7;
            color: #333;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .example-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .example-title {
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .example-item {
            margin-bottom: 10px;
        }
        
        .example-guess {
            display: inline-flex;
            gap: 5px;
            margin-right: 10px;
        }
        
        .example-digit {
            width: 30px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .rules-close {
            text-align: center;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .ai-thinking-animation {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }
        
        .thinking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ff6b6b;
            animation: thinking 1.5s infinite ease-in-out;
        }
        
        .thinking-dot:nth-child(1) { animation-delay: 0s; }
        .thinking-dot:nth-child(2) { animation-delay: 0.2s; }
        .thinking-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes thinking {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.5); opacity: 1; }
        }
        
        .ai-info {
            background: rgba(255, 107, 107, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .ai-info-title {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .ai-info-text {
            color: #e0e0e0;
            line-height: 1.5;
        }
        
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .difficulty-btn {
            padding: 10px 20px;
            border: 2px solid transparent;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .difficulty-btn.active {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }
        
        .difficulty-btn.easy { color: #4caf50; }
        .difficulty-btn.medium { color: #ff9800; }
        .difficulty-btn.hard { color: #f44336; }
        
        .time-result-list {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
        }
        
        .time-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid #9d4edd;
        }
        
        .time-result-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .time-result-date {
            font-size: 0.9rem;
            color: #a8dadc;
        }
        
        .time-result-stats {
            font-size: 0.9rem;
            color: #e0e0e0;
        }
        
        .clear-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .clear-modal-content {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .clear-modal-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #ff6b6b;
        }
        
        .clear-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        
        .clear-option {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .clear-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .clear-option-title {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .clear-option-desc {
            font-size: 0.9rem;
            color: #a8dadc;
        }
        
        .clear-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .player-panel, .stats-panel {
                max-width: 100%;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .number-input {
                width: 50px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .secret-digit, .ai-digit, .guess-digit, .winner-digit {
                width: 50px;
                height: 70px;
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .input-grid {
                gap: 5px;
            }
            
            .number-input {
                width: 45px;
                height: 55px;
                font-size: 1.6rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .difficulty-selector {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>äººæœºå¯¹æˆ˜çŒœæ•°å­—</h1>
            <p class="subtitle">ä¸ç”µè„‘AIæ¯”èµ›ï¼Œçœ‹è°å…ˆçŒœä¸­å¯¹æ–¹çš„4ä½ç§˜å¯†æ•°å­—ï¼</p>
        </header>
        
        <div class="game-info">
            <p><strong>æ¸¸æˆè§„åˆ™ï¼š</strong> ä½ å’Œç”µè„‘å„è‡ªè®¾ç½®ä¸€ä¸ª4ä½ä¸é‡å¤æ•°å­—ï¼ˆ0-9ï¼‰ä½œä¸ºç§˜å¯†æ•°å­—ï¼Œç„¶åè½®æµçŒœæµ‹å¯¹æ–¹çš„æ•°å­—ã€‚æ¯æ¬¡çŒœæµ‹åï¼Œç³»ç»Ÿä¼šç»™å‡ºæç¤ºï¼šAè¡¨ç¤ºæ•°å­—å’Œä½ç½®éƒ½æ­£ç¡®ï¼ŒBè¡¨ç¤ºæ•°å­—æ­£ç¡®ä½†ä½ç½®é”™è¯¯ã€‚é¦–å…ˆçŒœä¸­å¯¹æ–¹å…¨éƒ¨4ä¸ªæ•°å­—çš„ä¸€æ–¹è·èƒœï¼</p>
        </div>
        
        <div class="control-center">
            <div class="current-turn" id="currentTurn">è¯·è®¾ç½®ä½ çš„ç§˜å¯†æ•°å­—</div>
            <button class="btn btn-primary" id="showRulesBtn">æŸ¥çœ‹è¯¦ç»†è§„åˆ™</button>
        </div>
        
        <!-- éš¾åº¦é€‰æ‹© -->
        <div class="difficulty-selector">
            <button class="difficulty-btn easy active" data-difficulty="easy">ç®€å•</button>
            <button class="difficulty-btn medium" data-difficulty="medium">ä¸­ç­‰</button>
            <button class="difficulty-btn hard" data-difficulty="hard">å›°éš¾</button>
        </div>
        
        <div class="game-container">
            <!-- ç©å®¶é¢æ¿ -->
            <div class="player-panel player-1">
                <div class="player-header">
                    <div class="player-name">ç©å®¶ (ä½ )</div>
                    <div class="player-turn" id="playerTurn">è½®åˆ°ä½ äº†</div>
                </div>
                
                <div class="secret-section">
                    <div class="section-title">ä½ çš„ç§˜å¯†æ•°å­—</div>
                    <div class="secret-display" id="playerSecret">
                        <!-- ç§˜å¯†æ•°å­—å°†é€šè¿‡JSç”Ÿæˆ -->
                    </div>
                    <div class="input-grid">
                        <input type="number" class="number-input" id="playerSecret-1" min="0" max="9" maxlength="1" placeholder="-">
                        <input type="number" class="number-input" id="playerSecret-2" min="0" max="9" maxlength="1" placeholder="-">
                        <input type="number" class="number-input" id="playerSecret-3" min="0" max="9" maxlength="1" placeholder="-">
                        <input type="number" class="number-input" id="playerSecret-4" min="0" max="9" maxlength="1" placeholder="-">
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary" id="setPlayerNumberBtn">è®¾ç½®ç§˜å¯†æ•°å­—</button>
                        <button class="btn btn-secondary" id="randomPlayerNumberBtn">éšæœºç”Ÿæˆ</button>
                    </div>
                </div>
                
                <div class="input-section">
                    <div class="section-title">çŒœæµ‹ç”µè„‘çš„æ•°å­—</div>
                    <div class="input-grid">
                        <input type="number" class="number-input" id="playerGuess-1" min="0" max="9" maxlength="1" autocomplete="off">
                        <input type="number" class="number-input" id="playerGuess-2" min="0" max="9" maxlength="1" autocomplete="off">
                        <input type="number" class="number-input" id="playerGuess-3" min="0" max="9" maxlength="1" autocomplete="off">
                        <input type="number" class="number-input" id="playerGuess-4" min="0" max="9" maxlength="1" autocomplete="off">
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary" id="submitPlayerGuessBtn">æäº¤çŒœæµ‹</button>
                        <button class="btn btn-secondary" id="clearPlayerGuessBtn">æ¸…ç©º</button>
                        <button class="btn btn-success" id="autoGuessBtn">è‡ªåŠ¨çŒœæµ‹</button>
                    </div>
                </div>
                
                <div class="guesses-history">
                    <div class="history-title">
                        <div class="section-title">ä½ çš„çŒœæµ‹å†å²</div>
                        <div class="guess-count">æ¬¡æ•°: <span id="playerGuessCount">0</span></div>
                    </div>
                    <div class="history-list" id="playerHistoryList">
                        <!-- çŒœæµ‹å†å²å°†é€šè¿‡JSç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- ç”µè„‘é¢æ¿ -->
            <div class="player-panel player-2">
                <div class="player-header">
                    <div class="player-name">ç”µè„‘AI</div>
                    <div class="player-turn" id="aiTurn">ç”µè„‘æ€è€ƒä¸­</div>
                </div>
                
                <div class="ai-info">
                    <div class="ai-info-title">ğŸ¤– ç”µè„‘AIä¿¡æ¯</div>
                    <div class="ai-info-text">ç”µè„‘ä½¿ç”¨ç®—æ³•é«˜æ•ˆçŒœæµ‹æ•°å­—ã€‚å®ƒä»æ‰€æœ‰å¯èƒ½æ•°å­—ä¸­ç­›é€‰ï¼Œæ ¹æ®ä½ çš„åé¦ˆé€æ­¥ç¼©å°èŒƒå›´ï¼Œç›´åˆ°çŒœä¸­ä½ çš„æ•°å­—ã€‚</div>
                </div>
                
                <div class="secret-section">
                    <div class="section-title">ç”µè„‘çš„ç§˜å¯†æ•°å­—</div>
                    <div class="secret-display" id="aiSecret">
                        <!-- ç§˜å¯†æ•°å­—å°†é€šè¿‡JSç”Ÿæˆ -->
                    </div>
                    <div class="ai-thinking" id="aiThinking">
                        <div class="ai-thinking-animation">
                            <div class="thinking-dot"></div>
                            <div class="thinking-dot"></div>
                            <div class="thinking-dot"></div>
                        </div>
                    </div>
                </div>
                
                <div class="guesses-history">
                    <div class="history-title">
                        <div class="section-title">ç”µè„‘çš„çŒœæµ‹å†å²</div>
                        <div class="guess-count">æ¬¡æ•°: <span id="aiGuessCount">0</span></div>
                    </div>
                    <div class="history-list" id="aiHistoryList">
                        <!-- çŒœæµ‹å†å²å°†é€šè¿‡JSç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- ç»Ÿè®¡é¢æ¿ -->
            <div class="stats-panel">
                <div class="stats-title">å¯¹æˆ˜ç»Ÿè®¡</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="playerScoreValue">0</div>
                        <div class="stat-label">ç©å®¶å¾—åˆ†</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="aiScoreValue">0</div>
                        <div class="stat-label">ç”µè„‘å¾—åˆ†</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="gamesPlayedValue">0</div>
                        <div class="stat-label">å¯¹æˆ˜æ¬¡æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="winRateValue">0%</div>
                        <div class="stat-label">èƒœç‡</div>
                    </div>
                </div>
                
                <div class="stats-title" style="margin-top: 30px;">æœ€è¿‘æˆ˜ç»©</div>
                <div class="history-list" id="recentGamesList" style="max-height: 200px;">
                    <!-- æœ€è¿‘æ¸¸æˆè®°å½•å°†é€šè¿‡JSç”Ÿæˆ -->
                </div>
                
                <div class="stats-title" style="margin-top: 30px;">æ—¶é—´ç»“æœåˆ—è¡¨</div>
                <div class="time-result-list" id="timeResultList">
                    <!-- æ—¶é—´ç»“æœåˆ—è¡¨å°†é€šè¿‡JSç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="game-controls">
            <button class="btn btn-primary" id="newGameBtn">æ–°æ¸¸æˆ</button>
            <button class="btn btn-secondary" id="showStatsBtn">æŸ¥çœ‹ç»Ÿè®¡</button>
            <button class="btn btn-danger" id="clearDataBtn">æ¸…é™¤æ•°æ®</button>
        </div>
        
        <footer>
            <p>äººæœºå¯¹æˆ˜çŒœæ•°å­—æ¸¸æˆ | ä½¿ç”¨HTMLã€CSSå’ŒJavaScriptåˆ›å»º | 2023</p>
        </footer>
    </div>
    
    <!-- è·èƒœå¼¹çª— -->
    <div class="winner-announcement" id="winnerAnnouncement">
        <div class="winner-content">
            <div class="winner-title" id="winnerTitle">ç©å®¶è·èƒœï¼</div>
            <div class="winner-message" id="winnerMessage">ä½ æˆåŠŸçŒœå‡ºäº†ç”µè„‘çš„ç§˜å¯†æ•°å­—ï¼</div>
            <div class="winner-number" id="winnerNumberDisplay">
                <!-- è·èƒœæ•°å­—å°†é€šè¿‡JSç”Ÿæˆ -->
            </div>
            <button class="btn btn-primary" id="playAgainBtn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- AIè·èƒœå¼¹çª— -->
    <div class="winner-announcement" id="aiWinnerAnnouncement">
        <div class="winner-content">
            <div class="winner-title" style="color: #ff6b6b;">ç”µè„‘AIè·èƒœï¼</div>
            <div class="winner-message" id="aiWinnerMessage">ç”µè„‘AIæˆåŠŸçŒœå‡ºäº†ä½ çš„ç§˜å¯†æ•°å­—ï¼</div>
            <div class="winner-number" id="aiWinnerNumberDisplay">
                <!-- è·èƒœæ•°å­—å°†é€šè¿‡JSç”Ÿæˆ -->
            </div>
            <button class="btn btn-primary" id="aiPlayAgainBtn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- è§„åˆ™å¼¹çª— -->
    <div class="rules-modal" id="rulesModal">
        <div class="rules-content">
            <div class="rules-title">æ¸¸æˆè§„åˆ™è¯¦è§£</div>
            
            <div class="rules-list">
                <div class="rule-item">
                    <div class="rule-number">1</div>
                    <div>ä½ å’Œç”µè„‘å„è‡ªè®¾ç½®ä¸€ä¸ª4ä½æ•°å­—ä½œä¸ºç§˜å¯†æ•°å­—ï¼Œæ•°å­—èŒƒå›´ä¸º0-9ï¼Œä¸”å››ä½æ•°å­—ä¸èƒ½é‡å¤ã€‚</div>
                </div>
                <div class="rule-item">
                    <div class="rule-number">2</div>
                    <div>åŒæ–¹è½®æµçŒœæµ‹å¯¹æ–¹çš„ç§˜å¯†æ•°å­—ï¼Œæ¯æ¬¡çŒœæµ‹éœ€è¦è¾“å…¥ä¸€ä¸ª4ä½ä¸é‡å¤æ•°å­—ï¼ˆ0-9ï¼‰ã€‚</div>
                </div>
                <div class="rule-item">
                    <div class="rule-number">3</div>
                    <div>æ¯æ¬¡çŒœæµ‹åï¼Œç³»ç»Ÿä¼šç»™å‡ºæç¤ºï¼š
                        <ul style="margin-left: 20px; margin-top: 8px;">
                            <li><strong>A</strong>ï¼šæ•°å­—å’Œä½ç½®éƒ½æ­£ç¡®</li>
                            <li><strong>B</strong>ï¼šæ•°å­—æ­£ç¡®ä½†ä½ç½®é”™è¯¯</li>
                        </ul>
                    </div>
                </div>
                <div class="rule-item">
                    <div class="rule-number">4</div>
                    <div>é¦–å…ˆçŒœä¸­å¯¹æ–¹å…¨éƒ¨4ä¸ªæ•°å­—ï¼ˆå³è·å¾—4Aï¼‰çš„ä¸€æ–¹è·èƒœã€‚</div>
                </div>
                <div class="rule-item">
                    <div class="rule-number">5</div>
                    <div>ç”µè„‘AIä½¿ç”¨ç®—æ³•è¿›è¡ŒçŒœæµ‹ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚ä½ å¯ä»¥ä½¿ç”¨"è‡ªåŠ¨çŒœæµ‹"æŒ‰é’®è®©ç³»ç»Ÿå¸®ä½ ç”Ÿæˆä¸€ä¸ªåˆç†çš„çŒœæµ‹ã€‚</div>
                </div>
                <div class="rule-item">
                    <div class="rule-number">6</div>
                    <div>å¾—åˆ†è§„åˆ™ï¼šæ¯æ¬¡èƒœåˆ©å¾—100åˆ†ã€‚</div>
                </div>
            </div>
            
            <div class="example-section">
                <div class="example-title">ç¤ºä¾‹</div>
                <div class="example-item">
                    <div>å‡è®¾ç”µè„‘çš„ç§˜å¯†æ•°å­—æ˜¯ï¼š<strong>1 2 3 4</strong></div>
                </div>
                <div class="example-item">
                    <div class="example-guess">
                        <div class="example-digit">5</div>
                        <div class="example-digit">6</div>
                        <div class="example-digit">7</div>
                        <div class="example-digit">8</div>
                    </div>
                    <span>â†’ æç¤ºï¼š0A0Bï¼ˆæ²¡æœ‰æ•°å­—æ­£ç¡®ï¼‰</span>
                </div>
                <div class="example-item">
                    <div class="example-guess">
                        <div class="example-digit">1</div>
                        <div class="example-digit">2</div>
                        <div class="example-digit">7</div>
                        <div class="example-digit">8</div>
                    </div>
                    <span>â†’ æç¤ºï¼š2A0Bï¼ˆ1å’Œ2çš„ä½ç½®æ­£ç¡®ï¼‰</span>
                </div>
                <div class="example-item">
                    <div class="example-guess">
                        <div class="example-digit">4</div>
                        <div class="example-digit">3</div>
                        <div class="example-digit">2</div>
                        <div class="example-digit">1</div>
                    </div>
                    <span>â†’ æç¤ºï¼š0A4Bï¼ˆæ‰€æœ‰æ•°å­—éƒ½æ­£ç¡®ä½†ä½ç½®å…¨é”™ï¼‰</span>
                </div>
                <div class="example-item">
                    <div class="example-guess">
                        <div class="example-digit">1</div>
                        <div class="example-digit">2</div>
                        <div class="example-digit">3</div>
                        <div class="example-digit">4</div>
                    </div>
                    <span>â†’ æç¤ºï¼š<strong>4A0B</strong>ï¼ˆæ¸¸æˆè·èƒœï¼ï¼‰</span>
                </div>
            </div>
            
            <div class="rules-close">
                <button class="btn btn-primary" id="closeRulesBtn">å¼€å§‹æ¸¸æˆ</button>
            </div>
        </div>
    </div>
    
    <!-- æ¸…é™¤æ•°æ®å¼¹çª— -->
    <div class="clear-modal" id="clearModal">
        <div class="clear-modal-content">
            <div class="clear-modal-title">âš ï¸ æ¸…é™¤æ•°æ®ç¡®è®¤</div>
            <p>è¯·é€‰æ‹©è¦æ¸…é™¤çš„æ•°æ®ç±»å‹ï¼š</p>
            
            <div class="clear-options">
                <div class="clear-option" id="clearHistoryOnly">
                    <div class="clear-option-title">ä»…æ¸…é™¤å†å²è®°å½•</div>
                    <div class="clear-option-desc">æ¸…é™¤çŒœæµ‹å†å²å’Œæœ€è¿‘æˆ˜ç»©ï¼Œä¿ç•™ç»Ÿè®¡ä¿¡æ¯</div>
                </div>
                
                <div class="clear-option" id="clearStatsOnly">
                    <div class="clear-option-title">ä»…æ¸…é™¤ç»Ÿè®¡ä¿¡æ¯</div>
                    <div class="clear-option-desc">æ¸…é™¤å¾—åˆ†ã€èƒœç‡ç­‰ç»Ÿè®¡ï¼Œä¿ç•™å†å²è®°å½•</div>
                </div>
                
                <div class="clear-option" id="clearAllData">
                    <div class="clear-option-title">æ¸…é™¤æ‰€æœ‰æ•°æ®</div>
                    <div class="clear-option-desc">æ¸…é™¤æ‰€æœ‰å†å²è®°å½•å’Œç»Ÿè®¡ä¿¡æ¯</div>
                </div>
            </div>
            
            <div class="clear-buttons">
                <button class="btn btn-secondary" id="cancelClearBtn">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            player: {
                secretNumber: [],
                guesses: [],
                guessCount: 0,
                score: parseInt(localStorage.getItem('playerScore')) || 0
            },
            ai: {
                secretNumber: [],
                guesses: [],
                guessCount: 0,
                score: parseInt(localStorage.getItem('aiScore')) || 0,
                // AIç®—æ³•ç›¸å…³
                possibleNumbers: [],
                currentGuess: null,
                difficulty: 'medium' // easy, medium, hard
            },
            currentPlayer: 'player', // 'player' æˆ– 'ai'
            gameStarted: false,
            gameOver: false,
            winner: null, // 'player' æˆ– 'ai'
            gamesPlayed: parseInt(localStorage.getItem('gamesPlayed')) || 0,
            gamesWon: parseInt(localStorage.getItem('gamesWon')) || 0,
            recentGames: JSON.parse(localStorage.getItem('recentGames')) || [],
            timeResults: JSON.parse(localStorage.getItem('timeResults')) || []
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.player.secretNumber = [];
            gameState.player.guesses = [];
            gameState.player.guessCount = 0;
            
            gameState.ai.secretNumber = generateRandomNumber();
            gameState.ai.guesses = [];
            gameState.ai.guessCount = 0;
            
            // åˆå§‹åŒ–AIçš„å¯èƒ½æ•°å­—åˆ—è¡¨
            initAIPossibleNumbers();
            
            gameState.currentPlayer = 'player';
            gameState.gameStarted = false;
            gameState.gameOver = false;
            gameState.winner = null;
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            clearPlayerInputs();
            clearSecretInputs();
            
            // é‡ç½®UI
            updateSecretDisplays();
            updatePlayerTurnDisplay();
            updateGuessHistories();
            updateGuessCounts();
            updateStats();
            
            // éšè—å¼¹çª—
            document.getElementById('winnerAnnouncement').style.display = 'none';
            document.getElementById('aiWinnerAnnouncement').style.display = 'none';
            
            // å¯ç”¨/ç¦ç”¨æŒ‰é’®
            updateButtons();
            
            // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹æ¶ˆæ¯
            document.getElementById('currentTurn').textContent = "è¯·è®¾ç½®ä½ çš„ç§˜å¯†æ•°å­—";
            document.getElementById('aiThinking').innerHTML = '<div class="ai-thinking-animation"><div class="thinking-dot"></div><div class="thinking-dot"></div><div class="thinking-dot"></div></div>';
            
            // ç”ŸæˆAIçš„ç§˜å¯†æ•°å­—
            console.log("AIçš„ç§˜å¯†æ•°å­—(è°ƒè¯•ç”¨):", gameState.ai.secretNumber.join(''));
        }
        
        // åˆå§‹åŒ–AIçš„å¯èƒ½æ•°å­—åˆ—è¡¨
        function initAIPossibleNumbers() {
            gameState.ai.possibleNumbers = [];
            
            // ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„4ä½ä¸é‡å¤æ•°å­—
            for (let a = 0; a <= 9; a++) {
                for (let b = 0; b <= 9; b++) {
                    if (b === a) continue;
                    for (let c = 0; c <= 9; c++) {
                        if (c === a || c === b) continue;
                        for (let d = 0; d <= 9; d++) {
                            if (d === a || d === b || d === c) continue;
                            gameState.ai.possibleNumbers.push([a, b, c, d]);
                        }
                    }
                }
            }
            
            console.log(`AIåˆå§‹åŒ–äº†${gameState.ai.possibleNumbers.length}ä¸ªå¯èƒ½æ•°å­—`);
        }
        
        // ç”Ÿæˆéšæœº4ä½ä¸é‡å¤æ•°å­—
        function generateRandomNumber() {
            const digits = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            const number = [];
            
            for (let i = 0; i < 4; i++) {
                const randomIndex = Math.floor(Math.random() * digits.length);
                number.push(digits[randomIndex]);
                digits.splice(randomIndex, 1);
            }
            
            return number;
        }
        
        // æ£€æŸ¥æ•°å­—æ˜¯å¦æœ‰æ•ˆï¼ˆ4ä½ä¸é‡å¤æ•°å­—ï¼‰
        function isValidNumber(numberArray) {
            if (numberArray.length !== 4) return false;
            
            // æ£€æŸ¥æ˜¯å¦éƒ½æ˜¯0-9çš„æ•°å­—
            for (let digit of numberArray) {
                if (digit < 0 || digit > 9 || isNaN(digit)) {
                    return false;
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤æ•°å­—
            const uniqueDigits = new Set(numberArray);
            return uniqueDigits.size === 4;
        }
        
        // æ¯”è¾ƒçŒœæµ‹å’Œç§˜å¯†æ•°å­—ï¼Œè¿”å›{A, B}ç»“æœ
        function compareNumbers(guess, secret) {
            let a = 0; // æ•°å­—å’Œä½ç½®éƒ½æ­£ç¡®
            let b = 0; // æ•°å­—æ­£ç¡®ä½†ä½ç½®é”™è¯¯
            
            // æ£€æŸ¥A
            for (let i = 0; i < 4; i++) {
                if (guess[i] === secret[i]) {
                    a++;
                }
            }
            
            // æ£€æŸ¥B
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (i !== j && guess[i] === secret[j]) {
                        b++;
                        break; // æ¯ä¸ªçŒœæµ‹æ•°å­—åªè®¡ç®—ä¸€æ¬¡
                    }
                }
            }
            
            return { a, b };
        }
        
        // è®¾ç½®ç©å®¶ç§˜å¯†æ•°å­—
        function setPlayerSecretNumber(numberArray) {
            if (!isValidNumber(numberArray)) {
                alert("è¯·è¾“å…¥æœ‰æ•ˆçš„4ä½ä¸é‡å¤æ•°å­—ï¼ˆ0-9ï¼‰ï¼");
                return false;
            }
            
            gameState.player.secretNumber = numberArray;
            
            // å¦‚æœç©å®¶è®¾ç½®äº†æ•°å­—ï¼Œå¼€å§‹æ¸¸æˆ
            if (!gameState.gameStarted) {
                gameState.gameStarted = true;
                document.getElementById('currentTurn').textContent = "ä½ çš„å›åˆ - è¯·çŒœæµ‹ç”µè„‘çš„æ•°å­—";
            }
            
            updateSecretDisplays();
            updateButtons();
            return true;
        }
        
        // ç©å®¶æäº¤çŒœæµ‹
        function submitPlayerGuess() {
            // è·å–è¾“å…¥çš„æ•°å­—
            const inputs = ['playerGuess-1', 'playerGuess-2', 'playerGuess-3', 'playerGuess-4'];
            const guess = inputs.map(id => {
                const value = document.getElementById(id).value;
                return value === '' ? -1 : parseInt(value);
            });
            
            // éªŒè¯è¾“å…¥
            if (!isValidNumber(guess)) {
                alert("è¯·è¾“å…¥æœ‰æ•ˆçš„4ä½ä¸é‡å¤æ•°å­—ï¼ˆ0-9ï¼‰ï¼");
                return;
            }
            
            // æ¯”è¾ƒæ•°å­—
            const result = compareNumbers(guess, gameState.ai.secretNumber);
            
            // ä¿å­˜çŒœæµ‹è®°å½•
            const guessRecord = {
                guess: [...guess],
                result: result,
                turn: gameState.player.guessCount + 1
            };
            
            gameState.player.guesses.push(guessRecord);
            gameState.player.guessCount++;
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            clearPlayerInputs();
            
            // æ£€æŸ¥æ˜¯å¦è·èƒœ
            if (result.a === 4) {
                // ç©å®¶è·èƒœ
                gameState.gameOver = true;
                gameState.winner = 'player';
                showWinner('player');
            } else {
                // åˆ‡æ¢åˆ°AIå›åˆ
                gameState.currentPlayer = 'ai';
                updatePlayerTurnDisplay();
                updateButtons();
                
                // AIå¼€å§‹æ€è€ƒ
                setTimeout(makeAIGuess, 1000);
            }
            
            // æ›´æ–°UI
            updateGuessHistories();
            updateGuessCounts();
        }
        
        // AIè¿›è¡ŒçŒœæµ‹
        function makeAIGuess() {
            if (gameState.gameOver) return;
            
            // æ›´æ–°AIæ€è€ƒçŠ¶æ€
            document.getElementById('aiThinking').innerHTML = "ğŸ¤” ç”µè„‘æ­£åœ¨æ€è€ƒä¸­...";
            
            // æ ¹æ®éš¾åº¦æ·»åŠ å»¶è¿Ÿ
            let delay = 1000;
            if (gameState.ai.difficulty === 'easy') {
                delay = 1500;
            } else if (gameState.ai.difficulty === 'hard') {
                delay = 500;
            }
            
            setTimeout(() => {
                // AIç”ŸæˆçŒœæµ‹
                let guess;
                
                if (gameState.ai.guessCount === 0) {
                    // ç¬¬ä¸€æ¬¡çŒœæµ‹ï¼Œä½¿ç”¨ä¸€ä¸ªéšæœºä½†æœ‰æ•ˆçš„çŒœæµ‹
                    guess = generateRandomNumber();
                } else {
                    // ä½¿ç”¨ç®—æ³•ç”ŸæˆçŒœæµ‹
                    guess = generateAIGuess();
                }
                
                // ä¿å­˜AIçš„çŒœæµ‹
                gameState.ai.currentGuess = guess;
                
                // æ¯”è¾ƒæ•°å­—
                const result = compareNumbers(guess, gameState.player.secretNumber);
                
                // ä¿å­˜çŒœæµ‹è®°å½•
                const guessRecord = {
                    guess: [...guess],
                    result: result,
                    turn: gameState.ai.guessCount + 1
                };
                
                gameState.ai.guesses.push(guessRecord);
                gameState.ai.guessCount++;
                
                // æ›´æ–°AIçš„å¯èƒ½æ•°å­—åˆ—è¡¨
                updateAIPossibleNumbers(guess, result);
                
                // æ£€æŸ¥æ˜¯å¦è·èƒœ
                if (result.a === 4) {
                    // AIè·èƒœ
                    gameState.gameOver = true;
                    gameState.winner = 'ai';
                    showWinner('ai');
                } else {
                    // åˆ‡æ¢åˆ°ç©å®¶å›åˆ
                    gameState.currentPlayer = 'player';
                    updatePlayerTurnDisplay();
                    updateButtons();
                    
                    // é‡ç½®AIæ€è€ƒçŠ¶æ€
                    document.getElementById('aiThinking').innerHTML = '<div class="ai-thinking-animation"><div class="thinking-dot"></div><div class="thinking-dot"></div><div class="thinking-dot"></div></div>';
                }
                
                // æ›´æ–°UI
                updateGuessHistories();
                updateGuessCounts();
            }, delay);
        }
        
        // ç”ŸæˆAIçŒœæµ‹
        function generateAIGuess() {
            // å¦‚æœå¯èƒ½æ•°å­—åˆ—è¡¨ä¸ºç©ºï¼Œé‡æ–°åˆå§‹åŒ–
            if (gameState.ai.possibleNumbers.length === 0) {
                initAIPossibleNumbers();
            }
            
            // æ ¹æ®éš¾åº¦é€‰æ‹©ç­–ç•¥
            if (gameState.ai.difficulty === 'easy') {
                // ç®€å•éš¾åº¦ï¼šéšæœºé€‰æ‹©
                return gameState.ai.possibleNumbers[
                    Math.floor(Math.random() * gameState.ai.possibleNumbers.length)
                ];
            } else if (gameState.ai.difficulty === 'medium') {
                // ä¸­ç­‰éš¾åº¦ï¼šä½¿ç”¨æœ€å°æœ€å¤§ç®—æ³•
                return getMinimaxGuess();
            } else {
                // å›°éš¾éš¾åº¦ï¼šä½¿ç”¨æœ€ä¼˜ç®—æ³•ï¼ˆæ€»æ˜¯é€‰æ‹©å¯èƒ½æ•°å­—åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªï¼‰
                return gameState.ai.possibleNumbers[0];
            }
        }
        
        // æœ€å°æœ€å¤§ç®—æ³•ç”ŸæˆçŒœæµ‹
        function getMinimaxGuess() {
            // è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„æœ€å°æœ€å¤§ç®—æ³•
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸ªç®—æ³•ä¼šéå¸¸å¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€åŒ–å¤„ç†
            
            if (gameState.ai.possibleNumbers.length <= 10) {
                // å¦‚æœå¯èƒ½æ•°å­—å¾ˆå°‘ï¼Œç›´æ¥è¿”å›ç¬¬ä¸€ä¸ª
                return gameState.ai.possibleNumbers[0];
            }
            
            // å¦åˆ™å°è¯•é€‰æ‹©ä¸€ä¸ªèƒ½æœ€å¤§ç¨‹åº¦ç¼©å°å¯èƒ½æ•°å­—åˆ—è¡¨çš„çŒœæµ‹
            // è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä½†åå‘äºåŒ…å«ä¸åŒæ•°å­—çš„çŒœæµ‹
            let bestGuess = null;
            let bestScore = -1;
            
            // åªæ£€æŸ¥ä¸€éƒ¨åˆ†å¯èƒ½çš„çŒœæµ‹ä»¥æé«˜æ€§èƒ½
            const sampleSize = Math.min(50, gameState.ai.possibleNumbers.length);
            for (let i = 0; i < sampleSize; i++) {
                const guess = gameState.ai.possibleNumbers[
                    Math.floor(Math.random() * gameState.ai.possibleNumbers.length)
                ];
                
                // è®¡ç®—è¿™ä¸ªçŒœæµ‹çš„"åˆ†æ•°"ï¼ˆæ•°å­—çš„å¤šæ ·æ€§ï¼‰
                const uniqueDigits = new Set(guess);
                const score = uniqueDigits.size;
                
                if (score > bestScore) {
                    bestScore = score;
                    bestGuess = guess;
                }
            }
            
            return bestGuess || gameState.ai.possibleNumbers[0];
        }
        
        // æ›´æ–°AIçš„å¯èƒ½æ•°å­—åˆ—è¡¨
        function updateAIPossibleNumbers(guess, result) {
            // ç­›é€‰å‡ºä¸å½“å‰ç»“æœä¸€è‡´çš„å¯èƒ½æ•°å­—
            gameState.ai.possibleNumbers = gameState.ai.possibleNumbers.filter(number => {
                const testResult = compareNumbers(guess, number);
                return testResult.a === result.a && testResult.b === result.b;
            });
            
            console.log(`AIå‰©ä½™å¯èƒ½æ•°å­—: ${gameState.ai.possibleNumbers.length}`);
        }
        
        // ç©å®¶è‡ªåŠ¨çŒœæµ‹
        function autoGuessForPlayer() {
            if (!gameState.gameStarted || gameState.gameOver) return;
            
            // ç®€å•çš„è‡ªåŠ¨çŒœæµ‹é€»è¾‘
            let guess;
            
            if (gameState.player.guesses.length === 0) {
                // ç¬¬ä¸€æ¬¡çŒœæµ‹ï¼Œä½¿ç”¨ä¸€ä¸ªéšæœºçŒœæµ‹
                guess = generateRandomNumber();
            } else {
                // åŸºäºä¸Šä¸€æ¬¡ç»“æœç”Ÿæˆæ–°çŒœæµ‹
                const lastGuess = gameState.player.guesses[gameState.player.guesses.length - 1];
                const result = lastGuess.result;
                const lastGuessDigits = lastGuess.guess;
                
                if (result.a === 0 && result.b === 0) {
                    // å¦‚æœä¸Šä¸€ä¸ªçŒœæµ‹å…¨é”™ï¼Œç”Ÿæˆå…¨æ–°çš„æ•°å­—
                    guess = generateRandomNumber();
                    
                    // ç¡®ä¿æ–°çŒœæµ‹ä¸åŒ…å«ä¸Šä¸€ä¸ªçŒœæµ‹çš„ä»»ä½•æ•°å­—
                    while (guess.some(digit => lastGuessDigits.includes(digit))) {
                        guess = generateRandomNumber();
                    }
                } else {
                    // å¦åˆ™å°è¯•è°ƒæ•´ä¸Šä¸€ä¸ªçŒœæµ‹
                    guess = [...lastGuessDigits];
                    
                    // ç®€å•çš„è°ƒæ•´ï¼šéšæœºäº¤æ¢ä¸¤ä¸ªä½ç½®
                    const pos1 = Math.floor(Math.random() * 4);
                    const pos2 = Math.floor(Math.random() * 4);
                    
                    if (pos1 !== pos2) {
                        const temp = guess[pos1];
                        guess[pos1] = guess[pos2];
                        guess[pos2] = temp;
                    }
                }
            }
            
            // è®¾ç½®åˆ°è¾“å…¥æ¡†
            setPlayerInputValues(guess);
        }
        
        // æ˜¾ç¤ºè·èƒœè€…
        function showWinner(winner) {
            // è®°å½•æ¸¸æˆç»“æŸæ—¶é—´
            const endTime = new Date();
            
            // æ›´æ–°ç»Ÿè®¡
            gameState.gamesPlayed++;
            
            if (winner === 'player') {
                // ç©å®¶è·èƒœ
                gameState.player.score += 100;
                
                // å¦‚æœç©å®¶æ¯”AIæ›´å¿«çŒœä¸­ï¼Œé¢å¤–å¥–åŠ±
                if (gameState.player.guessCount < gameState.ai.guessCount) {
                    gameState.player.score += 50;
                }
                
                gameState.gamesWon++;
                
                // æ˜¾ç¤ºç©å®¶è·èƒœå¼¹çª—
                const winnerTitle = document.getElementById('winnerTitle');
                const winnerMessage = document.getElementById('winnerMessage');
                const winnerNumberDisplay = document.getElementById('winnerNumberDisplay');
                const winnerAnnouncement = document.getElementById('winnerAnnouncement');
                
                winnerTitle.textContent = "æ­å–œä½ ï¼è·èƒœäº†ï¼";
                winnerMessage.textContent = `ä½ åœ¨ç¬¬${gameState.player.guessCount}æ¬¡çŒœæµ‹ä¸­æˆåŠŸçŒœå‡ºäº†ç”µè„‘çš„ç§˜å¯†æ•°å­—ï¼\nå¾—åˆ†: +${winner === 'player' ? 100 : 0}${gameState.player.guessCount < gameState.ai.guessCount ? ' (+50 é€Ÿåº¦å¥–åŠ±)' : ''}`;
                
                // æ˜¾ç¤ºAIçš„ç§˜å¯†æ•°å­—
                winnerNumberDisplay.innerHTML = '';
                gameState.ai.secretNumber.forEach(digit => {
                    const digitElem = document.createElement('div');
                    digitElem.className = 'winner-digit';
                    digitElem.textContent = digit;
                    winnerNumberDisplay.appendChild(digitElem);
                });
                
                winnerAnnouncement.style.display = 'flex';
            } else {
                // AIè·èƒœ
                gameState.ai.score += 100;
                
                // æ˜¾ç¤ºAIè·èƒœå¼¹çª—
                const aiWinnerMessage = document.getElementById('aiWinnerMessage');
                const aiWinnerNumberDisplay = document.getElementById('aiWinnerNumberDisplay');
                const aiWinnerAnnouncement = document.getElementById('aiWinnerAnnouncement');
                
                aiWinnerMessage.textContent = `ç”µè„‘åœ¨ç¬¬${gameState.ai.guessCount}æ¬¡çŒœæµ‹ä¸­æˆåŠŸçŒœå‡ºäº†ä½ çš„ç§˜å¯†æ•°å­—ï¼`;
                
                // æ˜¾ç¤ºç©å®¶çš„ç§˜å¯†æ•°å­—
                aiWinnerNumberDisplay.innerHTML = '';
                gameState.player.secretNumber.forEach(digit => {
                    const digitElem = document.createElement('div');
                    digitElem.className = 'winner-digit';
                    digitElem.textContent = digit;
                    aiWinnerNumberDisplay.appendChild(digitElem);
                });
                
                aiWinnerAnnouncement.style.display = 'flex';
            }
            
            // ä¿å­˜æ¸¸æˆè®°å½•
            saveGameRecord(winner, endTime);
            
            // æ›´æ–°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('playerScore', gameState.player.score);
            localStorage.setItem('aiScore', gameState.ai.score);
            localStorage.setItem('gamesPlayed', gameState.gamesPlayed);
            localStorage.setItem('gamesWon', gameState.gamesWon);
            localStorage.setItem('timeResults', JSON.stringify(gameState.timeResults));
            
            // æ›´æ–°UI
            updateStats();
            updateSecretDisplays(); // æ­ç¤ºæ‰€æœ‰æ•°å­—
        }
        
        // ä¿å­˜æ¸¸æˆè®°å½•
        function saveGameRecord(winner, endTime) {
            const startTime = new Date(Date.now() - (Math.random() * 3600000)); // æ¨¡æ‹Ÿå¼€å§‹æ—¶é—´
            const duration = Math.abs(endTime - startTime);
            
            const gameRecord = {
                date: new Date().toLocaleDateString(),
                startTime: startTime.toLocaleString(),
                endTime: endTime.toLocaleString(),
                duration: formatDuration(duration),
                winner: winner,
                playerAttempts: gameState.player.guessCount,
                aiAttempts: gameState.ai.guessCount,
                playerSecret: gameState.player.secretNumber.join(''),
                aiSecret: gameState.ai.secretNumber.join('')
            };
            
            gameState.recentGames.unshift(gameRecord);
            
            // åªä¿ç•™æœ€è¿‘10æ¡è®°å½•
            if (gameState.recentGames.length > 10) {
                gameState.recentGames = gameState.recentGames.slice(0, 10);
            }
            
            // æ·»åŠ åˆ°æ—¶é—´ç»“æœåˆ—è¡¨
            gameState.timeResults.unshift({
                ...gameRecord,
                id: Date.now()
            });
            
            // åªä¿ç•™æœ€è¿‘20æ¡æ—¶é—´ç»“æœ
            if (gameState.timeResults.length > 20) {
                gameState.timeResults = gameState.timeResults.slice(0, 20);
            }
            
            localStorage.setItem('recentGames', JSON.stringify(gameState.recentGames));
            localStorage.setItem('timeResults', JSON.stringify(gameState.timeResults));
            updateRecentGames();
            updateTimeResultList();
        }
        
        // æ ¼å¼åŒ–æŒç»­æ—¶é—´
        function formatDuration(ms) {
            const seconds = Math.floor(ms / 1000);
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            
            if (minutes > 0) {
                return `${minutes}åˆ†é’Ÿ${remainingSeconds}ç§’`;
            }
            return `${seconds}ç§’`;
        }
        
        // æ›´æ–°ç©å®¶å›åˆæ˜¾ç¤º
        function updatePlayerTurnDisplay() {
            const playerTurn = document.getElementById('playerTurn');
            const aiTurn = document.getElementById('aiTurn');
            const currentTurn = document.getElementById('currentTurn');
            
            if (gameState.gameOver) {
                playerTurn.classList.remove('active');
                aiTurn.classList.remove('active');
                currentTurn.textContent = "æ¸¸æˆç»“æŸ";
            } else if (gameState.currentPlayer === 'player') {
                playerTurn.classList.add('active');
                aiTurn.classList.remove('active');
                currentTurn.textContent = gameState.gameStarted ? 
                    "ä½ çš„å›åˆ - è¯·çŒœæµ‹ç”µè„‘çš„æ•°å­—" : 
                    "è¯·è®¾ç½®ä½ çš„ç§˜å¯†æ•°å­—";
            } else {
                playerTurn.classList.remove('active');
                aiTurn.classList.add('active');
                currentTurn.textContent = "ç”µè„‘çš„å›åˆ - æ­£åœ¨æ€è€ƒ...";
            }
        }
        
        // æ›´æ–°ç§˜å¯†æ•°å­—æ˜¾ç¤º
        function updateSecretDisplays() {
            const playerSecret = document.getElementById('playerSecret');
            const aiSecret = document.getElementById('aiSecret');
            
            // æ›´æ–°ç©å®¶ç§˜å¯†æ•°å­—æ˜¾ç¤º
            playerSecret.innerHTML = '';
            for (let i = 0; i < 4; i++) {
                const digitElem = document.createElement('div');
                if (gameState.player.secretNumber[i] !== undefined) {
                    digitElem.className = 'secret-digit revealed';
                    digitElem.textContent = gameState.player.secretNumber[i];
                } else {
                    digitElem.className = 'secret-digit unknown';
                }
                playerSecret.appendChild(digitElem);
            }
            
            // æ›´æ–°AIç§˜å¯†æ•°å­—æ˜¾ç¤º
            aiSecret.innerHTML = '';
            for (let i = 0; i < 4; i++) {
                const digitElem = document.createElement('div');
                if (gameState.gameOver) {
                    digitElem.className = 'ai-digit revealed';
                    digitElem.textContent = gameState.ai.secretNumber[i];
                } else {
                    digitElem.className = 'ai-digit unknown';
                }
                aiSecret.appendChild(digitElem);
            }
        }
        
        // æ›´æ–°çŒœæµ‹å†å²
        function updateGuessHistories() {
            const playerHistoryList = document.getElementById('playerHistoryList');
            const aiHistoryList = document.getElementById('aiHistoryList');
            
            // æ›´æ–°ç©å®¶çš„çŒœæµ‹å†å²
            playerHistoryList.innerHTML = '';
            gameState.player.guesses.forEach((record, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const guessNumbers = document.createElement('div');
                guessNumbers.className = 'guess-numbers';
                
                record.guess.forEach(digit => {
                    const digitElem = document.createElement('div');
                    digitElem.className = 'guess-digit';
                    digitElem.textContent = digit;
                    guessNumbers.appendChild(digitElem);
                });
                
                const guessResult = document.createElement('div');
                guessResult.className = 'guess-result';
                
                const resultIndicator = document.createElement('div');
                resultIndicator.className = 'result-indicator';
                
                // æ·»åŠ Aç»“æœ
                for (let i = 0; i < record.result.a; i++) {
                    const aElem = document.createElement('div');
                    aElem.className = 'result-a';
                    aElem.textContent = 'A';
                    resultIndicator.appendChild(aElem);
                }
                
                // æ·»åŠ Bç»“æœ
                for (let i = 0; i < record.result.b; i++) {
                    const bElem = document.createElement('div');
                    bElem.className = 'result-b';
                    bElem.textContent = 'B';
                    resultIndicator.appendChild(bElem);
                }
                
                const resultCount = document.createElement('div');
                resultCount.className = 'result-count';
                resultCount.textContent = `${record.result.a}A${record.result.b}B`;
                
                guessResult.appendChild(resultIndicator);
                guessResult.appendChild(resultCount);
                
                historyItem.appendChild(guessNumbers);
                historyItem.appendChild(guessResult);
                playerHistoryList.appendChild(historyItem);
            });
            
            // æ›´æ–°AIçš„çŒœæµ‹å†å²
            aiHistoryList.innerHTML = '';
            gameState.ai.guesses.forEach((record, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'ai-history-item';
                
                const guessNumbers = document.createElement('div');
                guessNumbers.className = 'guess-numbers';
                
                record.guess.forEach(digit => {
                    const digitElem = document.createElement('div');
                    digitElem.className = 'guess-digit';
                    digitElem.textContent = digit;
                    guessNumbers.appendChild(digitElem);
                });
                
                const guessResult = document.createElement('div');
                guessResult.className = 'guess-result';
                
                const resultIndicator = document.createElement('div');
                resultIndicator.className = 'result-indicator';
                
                // æ·»åŠ Aç»“æœ
                for (let i = 0; i < record.result.a; i++) {
                    const aElem = document.createElement('div');
                    aElem.className = 'result-a';
                    aElem.textContent = 'A';
                    resultIndicator.appendChild(aElem);
                }
                
                // æ·»åŠ Bç»“æœ
                for (let i = 0; i < record.result.b; i++) {
                    const bElem = document.createElement('div');
                    bElem.className = 'result-b';
                    bElem.textContent = 'B';
                    resultIndicator.appendChild(bElem);
                }
                
                const resultCount = document.createElement('div');
                resultCount.className = 'result-count';
                resultCount.textContent = `${record.result.a}A${record.result.b}B`;
                
                guessResult.appendChild(resultIndicator);
                guessResult.appendChild(resultCount);
                
                historyItem.appendChild(guessNumbers);
                historyItem.appendChild(guessResult);
                aiHistoryList.appendChild(historyItem);
            });
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            playerHistoryList.scrollTop = playerHistoryList.scrollHeight;
            aiHistoryList.scrollTop = aiHistoryList.scrollHeight;
        }
        
        // æ›´æ–°çŒœæµ‹æ¬¡æ•°
        function updateGuessCounts() {
            document.getElementById('playerGuessCount').textContent = gameState.player.guessCount;
            document.getElementById('aiGuessCount').textContent = gameState.ai.guessCount;
        }
        
        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            document.getElementById('playerScoreValue').textContent = gameState.player.score;
            document.getElementById('aiScoreValue').textContent = gameState.ai.score;
            document.getElementById('gamesPlayedValue').textContent = gameState.gamesPlayed;
            
            // è®¡ç®—èƒœç‡
            const winRate = gameState.gamesPlayed > 0 ? 
                Math.round((gameState.gamesWon / gameState.gamesPlayed) * 100) : 0;
            document.getElementById('winRateValue').textContent = `${winRate}%`;
            
            updateRecentGames();
            updateTimeResultList();
        }
        
        // æ›´æ–°æœ€è¿‘æ¸¸æˆè®°å½•
        function updateRecentGames() {
            const recentGamesList = document.getElementById('recentGamesList');
            recentGamesList.innerHTML = '';
            
            gameState.recentGames.forEach(record => {
                const gameItem = document.createElement('div');
                gameItem.className = 'history-item';
                gameItem.style.padding = '8px 12px';
                gameItem.style.marginBottom = '5px';
                gameItem.style.fontSize = '0.9rem';
                
                const winnerIcon = record.winner === 'player' ? 'ğŸ‘¤' : 'ğŸ¤–';
                const winnerColor = record.winner === 'player' ? '#4fc3f7' : '#ff6b6b';
                
                gameItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; width: 100%;">
                        <div>${record.date}</div>
                        <div style="font-weight: bold; color: ${winnerColor}">
                            ${winnerIcon} ${record.winner === 'player' ? 'ç©å®¶' : 'ç”µè„‘'}
                        </div>
                    </div>
                    <div style="font-size: 0.8rem; color: #a8dadc; margin-top: 5px;">
                        ç©å®¶: ${record.playerAttempts}æ¬¡ | ç”µè„‘: ${record.aiAttempts}æ¬¡
                    </div>
                `;
                
                recentGamesList.appendChild(gameItem);
            });
        }
        
        // æ›´æ–°æ—¶é—´ç»“æœåˆ—è¡¨
        function updateTimeResultList() {
            const timeResultList = document.getElementById('timeResultList');
            timeResultList.innerHTML = '';
            
            gameState.timeResults.forEach(record => {
                const timeResultItem = document.createElement('div');
                timeResultItem.className = 'time-result-item';
                
                const winnerIcon = record.winner === 'player' ? 'ğŸ‘¤' : 'ğŸ¤–';
                const winnerColor = record.winner === 'player' ? '#4fc3f7' : '#ff6b6b';
                
                timeResultItem.innerHTML = `
                    <div class="time-result-details">
                        <div>${record.startTime}</div>
                        <div class="time-result-stats">${record.duration} | ${record.playerAttempts}:${record.aiAttempts}</div>
                    </div>
                    <div style="font-weight: bold; color: ${winnerColor}">
                        ${winnerIcon} ${record.winner === 'player' ? 'ç©å®¶' : 'ç”µè„‘'}
                    </div>
                `;
                
                timeResultList.appendChild(timeResultItem);
            });
        }
        
        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtons() {
            const playerHasNumber = gameState.player.secretNumber.length === 4;
            const gameStarted = gameState.gameStarted;
            const gameOver = gameState.gameOver;
            const isPlayerTurn = gameState.currentPlayer === 'player';
            
            // è®¾ç½®ç§˜å¯†æ•°å­—æŒ‰é’®
            document.getElementById('setPlayerNumberBtn').disabled = playerHasNumber || gameOver;
            document.getElementById('randomPlayerNumberBtn').disabled = playerHasNumber || gameOver;
            
            // æäº¤çŒœæµ‹æŒ‰é’®
            document.getElementById('submitPlayerGuessBtn').disabled = 
                !gameStarted || !isPlayerTurn || gameOver;
                
            // æ¸…ç©ºæŒ‰é’®
            document.getElementById('clearPlayerGuessBtn').disabled = gameOver;
            
            // è‡ªåŠ¨çŒœæµ‹æŒ‰é’®
            document.getElementById('autoGuessBtn').disabled = 
                !gameStarted || !isPlayerTurn || gameOver;
        }
        
        // æ¸…ç©ºç©å®¶è¾“å…¥
        function clearPlayerInputs() {
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`playerGuess-${i}`).value = '';
            }
        }
        
        // æ¸…ç©ºç§˜å¯†æ•°å­—è¾“å…¥
        function clearSecretInputs() {
            for (let i = 1; i <= 4; i++) {
                document.getElementById(`playerSecret-${i}`).value = '';
            }
        }
        
        // è®¾ç½®ç©å®¶è¾“å…¥æ¡†çš„å€¼
        function setPlayerInputValues(digits) {
            for (let i = 0; i < 4; i++) {
                document.getElementById(`playerGuess-${i+1}`).value = digits[i];
            }
        }
        
        // æ‰‹åŠ¨è®¾ç½®ç©å®¶ç§˜å¯†æ•°å­—
        function setupPlayerSecretNumber() {
            const inputs = ['playerSecret-1', 'playerSecret-2', 'playerSecret-3', 'playerSecret-4'];
            
            const number = inputs.map(id => {
                const value = document.getElementById(id).value;
                return value === '' ? -1 : parseInt(value);
            });
            
            if (setPlayerSecretNumber(number)) {
                clearSecretInputs();
                alert(`ä½ çš„ç§˜å¯†æ•°å­—è®¾ç½®æˆåŠŸ: ${number.join(' ')}`);
                
                // å¦‚æœæ¸¸æˆè¿˜æ²¡å¼€å§‹ï¼Œå¼€å§‹æ¸¸æˆ
                if (!gameState.gameStarted) {
                    gameState.gameStarted = true;
                    updatePlayerTurnDisplay();
                }
            }
        }
        
        // è®¾ç½®AIéš¾åº¦
        function setAIDifficulty(difficulty) {
            gameState.ai.difficulty = difficulty;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.difficulty-btn[data-difficulty="${difficulty}"]`).classList.add('active');
            
            // æ ¹æ®éš¾åº¦è°ƒæ•´AIæ€è€ƒé€Ÿåº¦
            let difficultyName, difficultyColor;
            
            switch(difficulty) {
                case 'easy':
                    difficultyName = 'ç®€å•';
                    difficultyColor = '#4caf50';
                    break;
                case 'medium':
                    difficultyName = 'ä¸­ç­‰';
                    difficultyColor = '#ff9800';
                    break;
                case 'hard':
                    difficultyName = 'å›°éš¾';
                    difficultyColor = '#f44336';
                    break;
            }
            
            // æ›´æ–°AIä¿¡æ¯
            const aiInfoText = document.querySelector('.ai-info-text');
            aiInfoText.innerHTML = `ç”µè„‘ä½¿ç”¨<strong>${difficultyName}éš¾åº¦</strong>ç®—æ³•ã€‚${difficulty === 'easy' ? 'æ€è€ƒè¾ƒæ…¢ï¼ŒçŒœæµ‹æ•ˆç‡ä¸€èˆ¬ã€‚' : difficulty === 'medium' ? 'å¹³è¡¡äº†é€Ÿåº¦å’Œæ•ˆç‡ã€‚' : 'æ€è€ƒå¿«é€Ÿï¼Œä½¿ç”¨é«˜æ•ˆç®—æ³•ã€‚'}`;
        }
        
        // æ¸…é™¤æ•°æ®å‡½æ•°
        function clearHistoryOnly() {
            // åªæ¸…é™¤å†å²è®°å½•
            gameState.player.guesses = [];
            gameState.ai.guesses = [];
            gameState.recentGames = [];
            gameState.timeResults = [];
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.removeItem('recentGames');
            localStorage.removeItem('timeResults');
            
            // æ›´æ–°UI
            updateGuessHistories();
            updateRecentGames();
            updateTimeResultList();
            
            alert("å†å²è®°å½•å·²æ¸…é™¤ï¼");
        }
        
        function clearStatsOnly() {
            // åªæ¸…é™¤ç»Ÿè®¡ä¿¡æ¯
            gameState.player.score = 0;
            gameState.ai.score = 0;
            gameState.gamesPlayed = 0;
            gameState.gamesWon = 0;
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('playerScore', '0');
            localStorage.setItem('aiScore', '0');
            localStorage.setItem('gamesPlayed', '0');
            localStorage.setItem('gamesWon', '0');
            
            // æ›´æ–°UI
            updateStats();
            
            alert("ç»Ÿè®¡ä¿¡æ¯å·²æ¸…é™¤ï¼");
        }
        
        function clearAllData() {
            // æ¸…é™¤æ‰€æœ‰æ•°æ®
            gameState.player.score = 0;
            gameState.ai.score = 0;
            gameState.gamesPlayed = 0;
            gameState.gamesWon = 0;
            gameState.player.guesses = [];
            gameState.ai.guesses = [];
            gameState.recentGames = [];
            gameState.timeResults = [];
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('playerScore', '0');
            localStorage.setItem('aiScore', '0');
            localStorage.setItem('gamesPlayed', '0');
            localStorage.setItem('gamesWon', '0');
            localStorage.removeItem('recentGames');
            localStorage.removeItem('timeResults');
            
            // æ›´æ–°UI
            updateStats();
            updateGuessHistories();
            updateRecentGames();
            updateTimeResultList();
            
            alert("æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ï¼");
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('setPlayerNumberBtn').addEventListener('click', setupPlayerSecretNumber);
        
        document.getElementById('randomPlayerNumberBtn').addEventListener('click', () => {
            const randomNumber = generateRandomNumber();
            setPlayerSecretNumber(randomNumber);
            alert(`ä½ çš„ç§˜å¯†æ•°å­—å·²éšæœºè®¾ç½®ä¸º: ${randomNumber.join(' ')}`);
            
            // å¦‚æœæ¸¸æˆè¿˜æ²¡å¼€å§‹ï¼Œå¼€å§‹æ¸¸æˆ
            if (!gameState.gameStarted) {
                gameState.gameStarted = true;
                updatePlayerTurnDisplay();
            }
        });
        
        document.getElementById('submitPlayerGuessBtn').addEventListener('click', submitPlayerGuess);
        
        document.getElementById('clearPlayerGuessBtn').addEventListener('click', clearPlayerInputs);
        
        document.getElementById('autoGuessBtn').addEventListener('click', autoGuessForPlayer);
        
        document.getElementById('newGameBtn').addEventListener('click', () => {
            if (gameState.gameStarted && !gameState.gameOver) {
                if (!confirm("å¼€å§‹æ–°æ¸¸æˆå°†ä¸¢å¤±å½“å‰æ¸¸æˆè¿›åº¦ï¼Œç¡®å®šå—ï¼Ÿ")) {
                    return;
                }
            }
            
            initGame();
        });
        
        document.getElementById('showStatsBtn').addEventListener('click', () => {
            updateStats();
            alert(`å¯¹æˆ˜ç»Ÿè®¡ï¼š
                ç©å®¶å¾—åˆ†: ${gameState.player.score}
                ç”µè„‘å¾—åˆ†: ${gameState.ai.score}
                å¯¹æˆ˜æ¬¡æ•°: ${gameState.gamesPlayed}
                èƒœåˆ©æ¬¡æ•°: ${gameState.gamesWon}
                èƒœç‡: ${gameState.gamesPlayed > 0 ? 
                    Math.round((gameState.gamesWon / gameState.gamesPlayed) * 100) : 0}%
                AIéš¾åº¦: ${gameState.ai.difficulty === 'easy' ? 'ç®€å•' : gameState.ai.difficulty === 'medium' ? 'ä¸­ç­‰' : 'å›°éš¾'}
            `);
        });
        
        document.getElementById('playAgainBtn').addEventListener('click', () => {
            document.getElementById('winnerAnnouncement').style.display = 'none';
            initGame();
        });
        
        document.getElementById('aiPlayAgainBtn').addEventListener('click', () => {
            document.getElementById('aiWinnerAnnouncement').style.display = 'none';
            initGame();
        });
        
        document.getElementById('showRulesBtn').addEventListener('click', () => {
            document.getElementById('rulesModal').style.display = 'flex';
        });
        
        document.getElementById('closeRulesBtn').addEventListener('click', () => {
            document.getElementById('rulesModal').style.display = 'none';
        });
        
        document.getElementById('clearDataBtn').addEventListener('click', () => {
            document.getElementById('clearModal').style.display = 'flex';
        });
        
        document.getElementById('clearHistoryOnly').addEventListener('click', () => {
            clearHistoryOnly();
            document.getElementById('clearModal').style.display = 'none';
        });
        
        document.getElementById('clearStatsOnly').addEventListener('click', () => {
            clearStatsOnly();
            document.getElementById('clearModal').style.display = 'none';
        });
        
        document.getElementById('clearAllData').addEventListener('click', () => {
            clearAllData();
            document.getElementById('clearModal').style.display = 'none';
        });
        
        document.getElementById('cancelClearBtn').addEventListener('click', () => {
            document.getElementById('clearModal').style.display = 'none';
        });
        
        // éš¾åº¦é€‰æ‹©æŒ‰é’®
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const difficulty = btn.dataset.difficulty;
                setAIDifficulty(difficulty);
            });
        });
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
        document.getElementById('rulesModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('rulesModal')) {
                document.getElementById('rulesModal').style.display = 'none';
            }
        });
        
        document.getElementById('winnerAnnouncement').addEventListener('click', (e) => {
            if (e.target === document.getElementById('winnerAnnouncement')) {
                document.getElementById('winnerAnnouncement').style.display = 'none';
            }
        });
        
        document.getElementById('aiWinnerAnnouncement').addEventListener('click', (e) => {
            if (e.target === document.getElementById('aiWinnerAnnouncement')) {
                document.getElementById('aiWinnerAnnouncement').style.display = 'none';
            }
        });
        
        document.getElementById('clearModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('clearModal')) {
                document.getElementById('clearModal').style.display = 'none';
            }
        });
        
        // è¾“å…¥æ¡†è‡ªåŠ¨è·³è½¬
        document.querySelectorAll('.number-input').forEach((input, index, inputs) => {
            input.addEventListener('input', (e) => {
                // é™åˆ¶è¾“å…¥ä¸º0-9
                if (e.target.value.length > 1) {
                    e.target.value = e.target.value.slice(0, 1);
                }
                
                if (e.target.value !== '' && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });
            
            input.addEventListener('keydown', (e) => {
                // å›è½¦é”®æäº¤çŒœæµ‹
                if (e.key === 'Enter') {
                    e.preventDefault();
                    if (gameState.currentPlayer === 'player') {
                        if (input.id.startsWith('playerSecret')) {
                            document.getElementById('setPlayerNumberBtn').click();
                        } else {
                            document.getElementById('submitPlayerGuessBtn').click();
                        }
                    }
                }
                
                // ä½¿ç”¨é€€æ ¼é”®å‘å‰è·³è½¬
                if (e.key === 'Backspace' && e.target.value === '' && index > 0) {
                    inputs[index - 1].focus();
                }
                
                // ä½¿ç”¨æ–¹å‘é”®å¯¼èˆª
                if (e.key === 'ArrowLeft' && index > 0) {
                    inputs[index - 1].focus();
                }
                
                if (e.key === 'ArrowRight' && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });
        });
        
        // åˆå§‹åŒ–é¡µé¢
        function init() {
            // åŠ è½½ç»Ÿè®¡
            gameState.player.score = parseInt(localStorage.getItem('playerScore')) || 0;
            gameState.ai.score = parseInt(localStorage.getItem('aiScore')) || 0;
            gameState.gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
            gameState.gamesWon = parseInt(localStorage.getItem('gamesWon')) || 0;
            gameState.recentGames = JSON.parse(localStorage.getItem('recentGames')) || [];
            gameState.timeResults = JSON.parse(localStorage.getItem('timeResults')) || [];
            
            // è®¾ç½®é»˜è®¤AIéš¾åº¦
            setAIDifficulty('medium');
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>